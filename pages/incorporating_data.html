<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Incorporating Data into an R Package</title>
    <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
    <h1>4. Incorporating Data into an R Package</h1>
    <p>Adding data to an R package allows distributing it along with functions. This is useful for including examples, tests, or predefined datasets.</p>

    <h2>1. Preparing the Data</h2>
    <p>Before adding data to a package:</p>
    <ul>
        <li>Data must be in a format supported by R (e.g., <code>.csv</code>, <code>.rds</code>, or R objects like <code>data.frame</code>).</li>
        <li>Data should be clean and documented.</li>
    </ul>

    <h2>2. Saving Data to the <code>data/</code> Directory</h2>
    <p>Data included in a package is saved in the <code>data/</code> folder as <code>.rda</code> files.</p>
    <p>Example of adding data:</p>
    <pre><code>my_data <- data.frame(
    id = 1:5,
    value = c(10, 20, 30, 40, 50)
)
# Save as an .rda file
save(my_data, file = "data/my_data.rda")</code></pre>
    <p>Place the <code>my_data.rda</code> file in the <code>data/</code> folder of your package.</p>

    <h2>3. Documenting the Data with roxygen2</h2>
    <p>Data documentation is mandatory to ensure users can utilize it correctly.</p>
    <p>Example of data documentation:</p>
    <p>Add a description in an <code>.R</code> file in the <code>R/</code> folder (e.g., <code>my_data.R</code>):</p>
    <pre><code>#' Example Dataset
#'
#' This dataset contains sample data for demonstration purposes.
#'
#' @format A data frame with 5 rows and 2 variables:
#' \describe{
#'   \item{id}{Numeric ID of the sample.}
#'   \item{value}{Numeric value associated with the sample.}
#' }
#' @source Generated manually for package examples.
"my_data"</code></pre>

    <h3>Explanation of Tags</h3>
    <ul>
        <li><code>@format</code>: Describes the structure of the data.</li>
        <li><code>@source</code>: Specifies the data source.</li>
        <li><code>@describe</code>: Provides detailed descriptions of columns (variables).</li>
    </ul>

    <p>Then, generate (or update) the documentation:</p>
    <pre><code>devtools::document()</code></pre>

    <h2>4. Verifying the Data</h2>
    <p>Ensure the data is accessible:</p>
    <pre><code>data("my_data")
?my_data</code></pre>

    <h2>Dynamic Data</h2>
    <p>If the data needs to be generated by the user at runtime, use the <code>inst/</code> folder:</p>
    <ul>
        <li>Place the source data files in <code>inst/extdata/</code>.</li>
        <li>These files can be loaded using:</li>
    </ul>
    <pre><code>file_path <- system.file("extdata", "my_file.csv", package = "MyPackage")
data <- read.csv(file_path)</code></pre>

    <h2>Example with Different Types of Data</h2>
    <p>Adding a table (<code>data.frame</code>):</p>
    <pre><code>sample_data <- data.frame(
    gene = c("Gene1", "Gene2", "Gene3"),
    expression = c(1.2, 3.4, 2.8)
)
save(sample_data, file = "data/sample_data.rda")</code></pre>

    <p>Adding RDS files:</p>
    <p>Save an object in <code>.rds</code> format:</p>
    <pre><code>saveRDS(sample_data, file = "inst/extdata/sample_data.rds")</code></pre>

    <h3>Tips</h3>
    <ul>
        <li><strong>Data Size:</strong> Data should be small (CRAN limits package size to 5 MB). For larger data, use <code>inst/extdata/</code>.</li>
        <li><strong>Documentation:</strong> Always describe the format and source of the data.</li>
        <li><strong>Testing:</strong> Ensure the data loads and displays correctly.</li>
    </ul>
</body>
</html>
